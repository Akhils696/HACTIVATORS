<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drone Control Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>
        <h1>Drone Control Dashboard</h1>
        <button id="themeToggle">Toggle Dark Mode</button>
    </header>

    <main>
        <section class="camera">
            <h2>Drone Camera Feed</h2>
            <div class="video-container">
                <img src="{{ url_for('video_feed') }}" alt="Drone Camera Feed">
            </div>
        </section>

        <section class="sensor-data">
            <div class="card gps">
                <h2>GPS Data</h2>
                <div id="gps_data" class="data-box">Loading GPS data...</div>
            </div>

            <div class="card thermal">
                <h2>Thermal Sensor Data</h2>
                <div id="thermal_data" class="data-box">Loading thermal data...</div>
            </div>

            <div class="card radar">
                <h2>Rescue Radar Data</h2>
                <div id="radar_data" class="data-box">Loading radar data...</div>
            </div>
        </section>
    </main>

    <script>
        // Fetch and update GPS, thermal, and radar data every 5 seconds
        function loadGPS() {
            fetch('/gps_data')
                .then(response => response.text())
                .then(data => document.getElementById('gps_data').innerHTML = data);
        }

        function loadThermal() {
            fetch('/thermal_data')
                .then(response => response.text())
                .then(data => document.getElementById('thermal_data').innerHTML = data);
        }

        function loadRadar() {
            fetch('/radar_data')
                .then(response => response.text())
                .then(data => document.getElementById('radar_data').innerHTML = data);
        }

        setInterval(loadGPS, 5000);
        setInterval(loadThermal, 5000);
        setInterval(loadRadar, 5000);

        // Dark Mode Toggle
        const themeToggle = document.getElementById('themeToggle');
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
        });
    </script>
</body>
</html>
